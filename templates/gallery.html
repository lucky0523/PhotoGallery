<head>
    {% load static %}
    <link href="{% static 'css/tabler.min.css' %}" rel="stylesheet"/>
    <style>
        /* Image Viewer style begin */
        html, body {
            height: 100%;
            padding: 0px;
            margin: 0px;
        }

        .imageview {
            width: 100%;
            height: 100%;
            margin: 0 auto;
        }

        .imageview img {
            position: relative;
            width: 100%;
            height: 100%;
            display: inline-block;
            object-fit: contain;
        }

        /* The Close Button */
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .image_overlay {
            position: absolute;
            width: 100%;
            bottom: 0px;
            left: 0px;
            background: -webkit-linear-gradient(top,transparent,black);
        }

        .exif_overlay {
            margin-left: 20px;
            color:#fff;
        }

        .modal-dialog {
            max-width: max-content;
        }/* 一定要放在html文件里，为什么？ */

        /* Image Viewer style end */

        div.center {
            text-align: center;
        }

        ul.pagination {
            display: inline-block;
            padding: 0;
            margin: 0;
        }

        ul.pagination li {
            display: inline;
        }

        ul.pagination li a {
            color: black;
            float: left;
            padding: 8px 16px;
            text-decoration: none;
        }

        ul.pagination li a.active {
            background-color: #4CAF50;
            color: white;
        }

        ul.pagination li a:hover:not(.active) {
            background-color: #ddd;
        }

        .square {
            transition: transform .3s ease-out, opacity .3s ease-out, box-shadow .3s ease-out
        }

        .square:hover {
            transform: translateY(-3px);
            opacity: 1
        }
    </style>
</head>
<div class="page-body">
    <div class="container-xl">
        <div class="row row-cards" id="recommend_content">
            {% for item in PageData %}
                <div class="col-6 col-md-3 col-xl-2">
                    <div class="square">
                        <a href='javascript:show_mediainfo_modal({{ item }})'>
                            <img src="{{ item.thumbnail }}" width="240px">
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
        <br>
    </div>

</div>


<!-- 模态窗口 -->
<div class="modal modal-blur fade " id="system-media-modal" role="dialog" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="imageview">
            <img id="dialog_image" src="/dynamic/photos/sorted/raw/2020/Xiaomi.M2007J1SC.20200905175946.jpg">
        </div>
        <a href="javascript:void(0)" class="close" data-bs-dismiss="modal">x</a>
        <div class="image_overlay">
            <br>
            <h1 class="exif_overlay">mountain1</h1>
            <div class="exif_overlay" id="dialog_exif"></div>
            <div class="exif_overlay" id="dialog_focal_length"></div>
            <br>
        </div>

    </div>
</div>

<script type="text/javascript">

    //显示媒体详情
    function show_mediainfo_modal(item) {
        $("#dialog_image").attr("src", item.image);
        $("#dialog_exif").text(item.expo+" sec @ F"+item.f_number+",  ISO"+item.iso);
        $("#dialog_focal_length").text(item.focal_length+"mm");
        $("#system-media-modal").modal("show");
    }

    //隐藏媒体详情
    function hide_mediainfo_modal() {
        $("#system-media-modal").modal("hide");
    }

    $(document).keydown(function (event) {
        if (event.keyCode == 27) {
            setTimeout(function () {
                hide_mediainfo_modal();
            }, 100)
        }
    });

</script>